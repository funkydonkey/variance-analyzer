# ТЗ на образовательный проект

## Общая идея

Нужно pet‑проект: AI‑ассистент для variance analysis финансовой отчетности (сравнение фактических данных с бюджетом/планом, поиск и объяснение отклонений).[2][3]
Ключевая фишка: Claude Code выступает «ментором», который декомпозирует работу на задачи, дает тебе задания и подсказки по Python и агентным фреймворкам (OpenAI Agents SDK / AutoGen), но не пишет весь бэкенд за тебя.[1][4]

## Цели проекта

- Прокачать навыки Python (структура проекта, типы, тесты, работа с данными).
- Изучить и применить на практике OpenAI Agents SDK и/или AutoGen для построения простого агентного пайплайна.[5][4]
- Построить рабочий прототип variance analyzer’а для табличной финансовой отчетности (P&L, бюджет vs actual, месячные отчеты).[6][2]
- Максимально переложить «рутинный» фронтенд на Claude Code (генерация UI, стили, мелкие правки), оставив тебе аналитику/агентов/архитектуру, а также тесты.

## Принципы работы с Claude Code

1) Claude Code не должен сам писать весь проект  
- В каждом спринте/задаче он:  
  - Декомпозирует задачу на шаги.  
  - Объясняет, какой модуль/файл нужно создать/изменить.  
  - Дает пример интерфейса функций, типы, псевдокод или фрагменты кода.  
- Ты сам пишешь основную часть Python‑логики и интеграции с агентным фреймворком.[7][1]

2) Claude Code может писать код за тебя в зонах, где ты не планируешь развиваться  
- Фронтенд (React/Vue/простое HTML+Tailwind, компоненты UI).  
- Простая верстка форм, таблиц и страниц.  
- Бойлерплейт для деплоя (Dockerfile, минимальный CI, README).[8][7]
- Тесты

3) Обязательный формат задач от Claude Code  
Для каждой новой задачи Claude Code должен выдавать отдельный «task spec» (markdown‑файл), где есть:[9][8]
- Название задачи.  
- Цель задачи (связь с общей целью обучения).  
- Файлы/модули, которые нужно создать/изменить.  
- Подробный план шагов (1–5 шагов, без автогенерации всего кода).  
- Подсказки: ссылки на документацию, примеры вызова SDK, паттерны.[10][4]
- Мини‑чеклист для самопроверки (что протестировать, какие edge cases).  

## Функциональные требования (MVP)

1) Загрузка и подготовка данных  
- Пользователь загружает отчет в формате: CSV / XLSX, содержащий бюджетные и фактические показатели по статьям и периодам.  
- Система парсит и нормализует данные в единую таблицу (например, account, period, actual, budget).[11][6]
- Хранение данных: локально (файлы + простая SQLite/PostgreSQL, на твое усмотрение — в ТЗ указать как опцию).  

2) Расчет variance  
- Подсчет отклонений:  
  - Абсолютное отклонение: \(variance = actual - budget\).  
  - Процентное отклонение: \(variance\_pct = \frac{actual - budget}{budget}\) при ненулевом бюджете.  
- Возможность задать пороги «существенности» (например, > X% или > Y по абсолютному значению).[3][11]

3) Аналитика с помощью ИИ  
- Агент анализирует таблицу отклонений и:  
  - Выделяет top‑N наиболее значимых variance (по сумме, по % или комбинированно).  
  - Группирует отклонения по измерениям: период, статья, бизнес‑юнит (если есть).  
  - Генерирует текстовые объяснения в стиле: «Основное отклонение по выручке в марте связано с …» (на уровне гипотез/объяснений по данным и трендам).[2][6]
- Формирует краткое резюме variance analysis за выбранный период.[6][3]

4) Простой веб‑интерфейс  
- Страница загрузки файла и выбора параметров анализа (период, пороги, метрика сортировки).  
- Табличное отображение результата: budget, actual, variance, variance%.  
- Блок с AI‑комментариями и кратким summary.  
- Фронтенд (включая стили) может быть полностью сгенерирован Claude Code.[8]

## Нефункциональные требования

- Технологии бэкенда: Python 3.11+, FastAPI или аналогичный легкий фреймворк.[12]
- Структура проекта: чистая, модульная, с разделением:  
  - core (доменные модели, расчет variance),  
  - ai (интеграция с OpenAI Agents SDK/AutoGen),  
  - api (эндпоинты),  
  - ui (если нужно для шаблонов).  
- Обработка ошибок: валидировать входные файлы, давать понятные сообщения.  
- Тестирование: unit‑тесты для core‑логики (расчет variance, фильтрация, агрегирование).  

## Агентная архитектура

1) Базовый вариант (один агент через OpenAI Agents SDK)  
- Агент получает:  
  - Структурированные данные variance (подборка строк),  
  - Контекст (описание показателей, пороги, период),  
  - Задачу: «Сделай variance analysis и верни: список ключевых отклонений; краткое текстовое резюме в 3–5 пунктов».[4][3]
- Агент может вызывать инструмент, который:  
  - Дает доступ к дополнительной агрегированной статистике (суммы по категориям, тренды по периодам).[4]

2) Продвинутый вариант (AutoGen / multi‑agent)  
- Manager‑агент ставит подзадачи:  
  - Data Analyst агент: проверка данных, поиск паттернов.  
  - Reporter агент: формирование человеко‑читаемого отчета / bullet‑поинтов.[5][10]
- Общение организовано как диалог между агентами до достижения финального текста отчета.[10]

В ТЗ для Claude Code нужно явно указать, что MVP можно начать с single‑agent (OpenAI Agents SDK), а AutoGen‑архитектуру добавить как отдельный обучающий этап.[10][4]

## Требования к обучающему формату

Для каждого модуля проекта Claude Code должен:  
- Сначала написать архитектурный план и интерфейсы (без полного кода).  
- Дать тебе список микро‑заданий:  
  - «Напиши функцию calculate_variance(...) с такими‑то параметрами и возвращаемым типом; вот пример входа/выхода».  
  - «Реализуй endpoint /analyze, который принимает файл и параметры; вот пример схемы Pydantic».  
  - «Подключи OpenAI Agents SDK: здесь нужен client, здесь — описание tools; прочитай такую‑то часть документации».[1][4]
- После твоей реализации — делать образовательный code review:  
  - Пояснять, где можно улучшить структуру, типизацию, обработку ошибок.[7]

Фронтенд‑часть можно формулировать иначе: «Сгенерируй полностью компонент X с таким‑то интерфейсом», чтобы ты не тратил время на детали UI.

## Этапы реализации (для подсказки Claude Code)

1) Этап 1: Core‑логика variance  
- Датаклассы/модели для строк отчета.  
- Импорт CSV/XLSX и нормализация.  
- Функции расчета variance и фильтрации по порогам.[11][6]

2) Этап 2: API и веб‑оболочка  
- FastAPI‑сервер, эндпоинты для загрузки и запуска анализа.  
- Простая HTML/JS‑страница или SPA, полностью сгенерированная Claude Code.[12][8]

3) Этап 3: Интеграция с AI‑агентом  
- OpenAI Agents SDK: один агент, один набор tools.[4]
- Промпт‑шаблон для variance analysis.[3]

4) Этап 4: Multi‑agent (опционально)  
- Подключение AutoGen и разделение ролей агентов.[5][10]

5) Этап 5: Полировка и улучшение UX  
- Улучшение UI, оформление, сохранение сценариев анализа.  
- Документация для пользователя + README.

***

Если хочешь, дальше можно превратить это ТЗ в конкретный CLAUDE.md с глобальными настройками (как с тобой работать, какие части кода никогда не писать за тебя) и первым «Task 01: data model + variance core».

[1](https://www.anthropic.com/engineering/claude-code-best-practices)
[2](https://www.blackline.com/resources/glossaries/variance-analysis/)
[3](https://www.financialprofessionals.org/training-resources/resources/articles/Details/what-is-variance-analysis)
[4](https://www.datacamp.com/tutorial/openai-agents-sdk-tutorial)
[5](https://microsoft.github.io/autogen/stable/user-guide/core-user-guide/cookbook/openai-assistant-agent.html)
[6](https://www.netsuite.com/portal/resource/articles/accounting/flux-variance-analysis.shtml)
[7](https://vladimirsiedykh.com/blog/ai-development-workflow-claude-code-production-complete-guide-2025)
[8](https://www.sidetool.co/post/how-to-automate-tasks-with-claude-code-workflow-for-developers/)
[9](https://vc.ru/ai/2621502-vaybkoding-dlya-nerazrabotchikov-sovety-po-rabotye-s-ii)
[10](https://galileo.ai/blog/autogen-vs-crewai-vs-langgraph-vs-openai-agents-framework)
[11](https://www.trintech.com/blog/guide-variance-analysis-month-end-close/)
[12](https://www.perplexity.ai/search/177d54d0-2f4f-477e-a6bf-6db07abfcd70)
[13](https://www.reddit.com/r/ClaudeAI/comments/1n8dki1/how_to_use_claude_code_create_a_full_project_any/)
[14](https://www.youtube.com/watch?v=biIXbLJNzHE)
[15](https://www.reddit.com/r/ClaudeAI/comments/1j6qtka/i_have_a_large_project_of_existing_code_i_need_to/)
[16](https://lib.ncfu.ru/upload/medialibrary/d10/1taqx158ppcuugtwun2j58mxkfbe48bn/Mediakommunikatsii-v-usloviyakh-izmenyayushchegosya-mira.-Trendy_-problemy_-prognozy.pdf)
[17](https://www.pgik.ru/sites/default/files/zhurnal_1-2015.pdf)
[18](https://namdu.uz/media/Books/pdf/2025/01/31/NamDU-ARM-15400-%D0%9B%D0%B8%D0%BA%D0%B8_%D0%BC%D0%B0%D0%BD%D0%B8%D0%B0%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B4%D0%B5%D0%BF%D1%80%D0%B5%D1%81%D1%81%D0%B8%D0%B2%D0%BD%D0%BE%D0%B3%D0%BE_%D1%80%D0%B0%D1%81%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0.pdf)
[19](https://www.msses.ru/sveden/files/004076.pdf)
[20](https://dev.to/ujjavala/a-week-with-claude-code-lessons-surprises-and-smarter-workflows-23ip)
[21](https://www.linkedin.com/pulse/autogen-vs-openai-agents-sdk-examples-venkateswaran-rama-gyqzc)
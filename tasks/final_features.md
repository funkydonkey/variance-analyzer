# –¢–ó: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏ –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–æ–ª–±—Ü–æ–≤ (Full Implementation)

## üéØ –û–±—â–∞—è —Ü–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –≤ Variance Analyzer –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –º–∞–ø–ø–∏–Ω–≥–æ–º —Å—Ç–æ–ª–±—Ü–æ–≤ —á–µ—Ä–µ–∑ AI-–∞–≥–µ–Ω—Ç–∞.

**–í–ê–ñ–ù–û:** –≠—Ç–æ –ø–æ–ª–Ω–æ–µ –¢–ó –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. Claude Code –¥–æ–ª–∂–µ–Ω –Ω–∞–ø–∏—Å–∞—Ç—å –≤–µ—Å—å –∫–æ–¥ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –≤–∫–ª—é—á–∞—è backend-–ª–æ–≥–∏–∫—É, AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∏ frontend.

---

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: CSV, XLSX
- Drag & drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞:
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10 –ú–ë
  - –ú–∏–Ω–∏–º—É–º 2 —Å—Ç–æ–ª–±—Ü–∞
  - –ú–∏–Ω–∏–º—É–º 1 —Å—Ç—Ä–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ `st.session_state`
- –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π

**UI —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –û–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–º–µ—Ç–Ω–æ–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–π
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å –∏–º—è —Ñ–∞–π–ª–∞ –∏ –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (—Ä–∞–∑–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫/—Å—Ç–æ–ª–±—Ü–æ–≤)
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª" –¥–ª—è –∑–∞–º–µ–Ω—ã —Ç–µ–∫—É—â–µ–≥–æ

---

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–∞)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `st.tabs` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–æ–≤
- –¢–∞–±–∞ "üìä –î–∞–Ω–Ω—ã–µ" —Å–æ–¥–µ—Ä–∂–∏—Ç:
  
**–°–µ–∫—Ü–∏—è 1: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ**
  - –ò–º—è —Ñ–∞–π–ª–∞
  - –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–≤ –ö–ë/–ú–ë)
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∏ —Å—Ç–æ–ª–±—Ü–æ–≤
  - –¢–∏–ø —Ñ–∞–π–ª–∞ (CSV/XLSX)

**–°–µ–∫—Ü–∏—è 2: –ü—Ä–µ–≤—å—é –¥–∞–Ω–Ω—ã—Ö**
  - –ü—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —ç–∫—Å–µ–ª–µ–≤—Å–∫–æ–≥–æ —Ñ–∞–π–ª–∞

---

### 3. –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–æ–ª–±—Ü–æ–≤ —á–µ—Ä–µ–∑ AI

**Workflow:**

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏**
   - AI-–∞–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–æ–ª–±—Ü—ã —Ñ–∞–π–ª–∞
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç: –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π (–ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫)
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–æ–π —Å—Ç–æ–ª–±–µ—Ü —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç: `account`, `period`, `actual`, `budget`

2. **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞**
   - –ê–≥–µ–Ω—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –≤ —á–∞—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
     ```
     üìã –Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –≤–∞—à —Ñ–∞–π–ª "data.xlsx"
     
     –ü—Ä–µ–¥–ª–∞–≥–∞—é —Å–ª–µ–¥—É—é—â–∏–π –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–æ–ª–±—Ü–æ–≤:
     
     ‚úì Account Name ‚Üí account (–Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á—ë—Ç–∞)
     ‚úì Month ‚Üí period (–ø–µ—Ä–∏–æ–¥)
     ‚úì Actual Amount ‚Üí actual (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ)
     ‚úì Budget Amount ‚Üí budget (–±—é–¥–∂–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
     
     –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ? –í—ã –º–æ–∂–µ—Ç–µ:
     - –ù–∞–ø–∏—Å–∞—Ç—å "–î–∞" –∏–ª–∏ "–í–µ—Ä–Ω–æ" –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
     - –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å: "–°—Ç–æ–ª–±–µ—Ü X —ç—Ç–æ Y"
     ```

3. **–†—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç–µ:
     - "–î–∞" / "–í–µ—Ä–Ω–æ" / "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é" ‚Üí –º–∞–ø–ø–∏–Ω–≥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
     - "–°—Ç–æ–ª–±–µ—Ü 'Revenue' —ç—Ç–æ actual" ‚Üí –∞–≥–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –º–∞–ø–ø–∏–Ω–≥
     - "–ü–æ–∫–∞–∂–∏ –º–∞–ø–ø–∏–Ω–≥ –µ—â—ë —Ä–∞–∑" ‚Üí –∞–≥–µ–Ω—Ç –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Ç–µ–∫—É—â–∏–π –º–∞–ø–ø–∏–Ω–≥

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞**
   - –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –º–∞–ø–ø–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `st.session_state`
   - –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ `VarianceRow` –æ–±—ä–µ–∫—Ç–æ–≤
   - Variance –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫

5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∞–Ω–∞–ª–∏–∑–µ**
   - –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞–º–∞–ø–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ –æ—Ç–≤–µ—Ç–∞—Ö

**AI Tools –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞:**
- –°–æ–∑–¥–∞—Ç—å tool `suggest_column_mapping` –∫–æ—Ç–æ—Ä—ã–π:
  - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç: —Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤, –∏—Ö —Ç–∏–ø—ã, –ø—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ + confidence score
- –°–æ–∑–¥–∞—Ç—å tool `apply_column_mapping` –∫–æ—Ç–æ—Ä—ã–π:
  - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥
  - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç DataFrame –≤ —Å–ø–∏—Å–æ–∫ VarianceRow
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º

---

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π `test_data.csv` (–∫–∞–∫ —Å–µ–π—á–∞—Å)
- –ï—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –∑–∞–º–∞–ø–ª–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ —Å–µ—Å—Å–∏–∏ (–≤ `st.session_state`)
- –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –¥–∞–Ω–Ω—ã–º

---

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
variance-analyzer/
‚îú‚îÄ‚îÄ app_streamlit.py              # –ò–ó–ú–ï–ù–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å —Ç–∞–±—ã –∏ –∑–∞–≥—Ä—É–∑–∫—É
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ loader.py                 # –ò–ó–ú–ï–ù–ò–¢–¨: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ UploadedFile
‚îÇ   ‚îú‚îÄ‚îÄ mapper.py                 # –°–û–ó–î–ê–¢–¨: –ª–æ–≥–∏–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ models.py                 # –ò–ó–ú–ï–ù–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å ColumnMapping, FileMetadata
‚îú‚îÄ‚îÄ ai/
‚îÇ   ‚îú‚îÄ‚îÄ variance_agent.py         # –ò–ó–ú–ï–ù–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ tools.py                  # –ò–ó–ú–ï–ù–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å mapping tools
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ test_mapper.py            # –°–û–ó–î–ê–¢–¨: —Ç–µ—Å—Ç—ã –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞
    ‚îî‚îÄ‚îÄ test_file_upload.py       # –°–û–ó–î–ê–¢–¨: —Ç–µ—Å—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
```

---

### –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ (core/models.py)

```python
from dataclasses import dataclass
from typing import Dict, List, Optional

@dataclass
class ColumnMapping:
    """–ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–æ–ª–±—Ü–æ–≤ —Ñ–∞–π–ª–∞ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–ª—è."""
    account: str
    period: str
    actual: str
    budget: str
    extra_columns: Optional[Dict[str, str]] = None
    confidence: float = 1.0  # 0.0-1.0, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç —É–≤–µ—Ä–µ–Ω

@dataclass
class FileMetadata:
    """–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞."""
    filename: str
    rows: int
    columns: List[str]
    file_type: str  # 'csv' or 'xlsx'
    size_bytes: int
    column_types: Dict[str, str]  # column_name -> 'string'/'number'/'date'
```

---

### –õ–æ–≥–∏–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ (core/mapper.py) - –°–û–ó–î–ê–¢–¨

–î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏:

1. `analyze_columns(df: pd.DataFrame) -> Dict[str, Any]`
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —Å—Ç–æ–ª–±–µ—Ü
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∏–ø—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –ø—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π

2. `suggest_mapping(column_info: Dict) -> ColumnMapping`
   - –ë–∞–∑–æ–≤–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–∞–ø–ø–∏–Ω–≥–∞
   - –ò—â–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö —Å—Ç–æ–ª–±—Ü–æ–≤
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥

3. `apply_mapping(df: pd.DataFrame, mapping: ColumnMapping) -> List[VarianceRow]`
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –∫ DataFrame
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç —Å—Ç–æ–ª–±—Ü—ã
   - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ —Å–ø–∏—Å–æ–∫ VarianceRow
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç variance –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏

4. `validate_mapping(df: pd.DataFrame, mapping: ColumnMapping) -> Tuple[bool, str]`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (actual/budget –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å–ª–∞–º–∏)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (is_valid, error_message)

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ loader.py

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:

```python
def load_from_uploaded_file(uploaded_file) -> Tuple[pd.DataFrame, FileMetadata]:
    """
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –∏–∑ st.file_uploader.
    
    Args:
        uploaded_file: –û–±—ä–µ–∫—Ç UploadedFile –∏–∑ Streamlit
        
    Returns:
        Tuple –∏–∑ (DataFrame, FileMetadata)
        
    Raises:
        ValueError: –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
    """
    # –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é
    # –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤ DataFrame
    # –°–æ–∑–¥–∞—Ç—å FileMetadata
    # –í–∞–ª–∏–¥–∞—Ü–∏—è (—Ä–∞–∑–º–µ—Ä, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
    pass
```

---

### AI Agent (ai/variance_agent.py)

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:

1. `async def suggest_column_mapping_interactive(df: pd.DataFrame) -> str`
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç DataFrame
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ –≤ —á–∞—Ç–µ
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. `async def confirm_mapping(user_response: str, suggested_mapping: ColumnMapping) -> Tuple[bool, ColumnMapping]`
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ï—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (True, mapping)
   - –ï—Å–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (True, new_mapping)
   - –ï—Å–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (False, None)

3. `async def apply_and_store_mapping(df: pd.DataFrame, mapping: ColumnMapping) -> str`
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ session_state
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

---

### AI Tools (ai/tools.py)

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ tools:

1. **get_column_analysis_tool**
   ```python
   def get_column_analysis(dataframe_summary: str) -> Dict:
       """
       –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Ö —Ç–∏–ø–æ–≤.
       
       Args:
           dataframe_summary: JSON string —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–æ–ª–±—Ü–∞—Ö
           
       Returns:
           –ê–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–º —Ç–∏–ø–æ–º
       """
   ```

2. **apply_mapping_tool**
   ```python
   def apply_column_mapping(mapping_json: str) -> Dict:
       """
       –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º.
       
       Args:
           mapping_json: JSON —Å –º–∞–ø–ø–∏–Ω–≥–æ–º —Å—Ç–æ–ª–±—Ü–æ–≤
           
       Returns:
           –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
       """
   ```

---

### Streamlit UI (app_streamlit.py)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è session_state
if "uploaded_file" not in st.session_state:
    st.session_state.uploaded_file = None
if "file_metadata" not in st.session_state:
    st.session_state.file_metadata = None
if "column_mapping" not in st.session_state:
    st.session_state.column_mapping = None
if "mapped_data" not in st.session_state:
    st.session_state.mapped_data = None

# –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
with st.sidebar:
    st.header("üìÅ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö")
    
    uploaded_file = st.file_uploader(
        "–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à —Ñ–∞–π–ª",
        type=["csv", "xlsx"],
        help="CSV –∏–ª–∏ XLSX —Ñ–∞–π–ª —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏"
    )
    
    if uploaded_file:
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ session_state
        # –ü–æ–∫–∞–∑ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        pass
    
    if st.button("üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë"):
        # –û—á–∏—Å—Ç–∫–∞ session_state
        st.rerun()

# –ì–ª–∞–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å - —Ç–∞–±—ã
tab1, tab2 = st.tabs(["üí¨ –ß–∞—Ç —Å AI", "üìä –î–∞–Ω–Ω—ã–µ"])

with tab1:
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    # –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
    # –ü–æ–ª–µ –≤–≤–æ–¥–∞
    pass

with tab2:
    if st.session_state.uploaded_file:
        # –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
        # –ü—Ä–µ–≤—å—é –¥–∞–Ω–Ω—ã—Ö
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
    else:
        st.info("–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–∞–Ω–Ω—ã–µ")
```

**–î–∏–∑–∞–π–Ω —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ (–≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, –∞–Ω–∏–º–∞—Ü–∏–∏)
- –¢–∞–±—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º–∏
- –û–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ - –∑–∞–º–µ—Ç–Ω–∞—è, —Å –∏–∫–æ–Ω–∫–æ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `st.columns` –¥–ª—è layout
- Errors/Success messages - —á–µ—Ä–µ–∑ `st.error()`, `st.success()`

---

## üé® UX Flow

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º `test_data.csv`
2. –í –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –µ—Å—Ç—å –æ–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–≤–æ–π —Ñ–∞–π–ª
4. –§–∞–π–ª –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
5. –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ –≤ —á–∞—Ç–µ
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç
7. –î–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –∫ –∞–Ω–∞–ª–∏–∑—É

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Ç–∞–±—É "üìä –î–∞–Ω–Ω—ã–µ"
2. –í–∏–¥–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞
3. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 20 —Å—Ç—Ä–æ–∫
4. –ò–∑—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º
5. –ú–æ–∂–µ—Ç —Å–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞
1. –ê–≥–µ–Ω—Ç –ø—Ä–µ–¥–ª–æ–∂–∏–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç: "–°—Ç–æ–ª–±–µ—Ü 'Total Revenue' —ç—Ç–æ actual"
3. –ê–≥–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥
4. –ê–≥–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã. –í—Å—ë –≤–µ—Ä–Ω–æ —Ç–µ–ø–µ—Ä—å?"
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç
6. –ú–∞–ø–ø–∏–Ω–≥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å CSV/XLSX —Ñ–∞–π–ª
- [ ] –§–∞–π–ª –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è (—Ä–∞–∑–º–µ—Ä, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ç–∞–±–µ "–î–∞–Ω–Ω—ã–µ"
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º
- [ ] AI-–∞–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤ —á–∞—Ç–µ
- [ ] –ü–æ—Å–ª–µ –º–∞–ø–ø–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ VarianceRow
- [ ] Variance –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- [ ] –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- [ ] –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –¥–∞–Ω–Ω—ã–º
- [ ] –í–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è mapper.py
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ `tests/fixtures/`:

1. **valid_data.csv** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–∞–π–ª —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Å—Ç–æ–ª–±—Ü–æ–≤
2. **unclear_columns.xlsx** - —Ñ–∞–π–ª —Å –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ (Col1, Col2, etc.)
3. **missing_values.csv** - —Ñ–∞–π–ª —Å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
4. **invalid_types.csv** - —Ñ–∞–π–ª –≥–¥–µ actual/budget —ç—Ç–æ —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ —á–∏—Å–µ–ª

Unit-—Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø–æ–∫—Ä—ã–≤–∞—Ç—å:
- –ó–∞–≥—Ä—É–∑–∫—É —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–∞–π–ª–æ–≤
- –ê–Ω–∞–ª–∏–∑ —Å—Ç–æ–ª–±—Ü–æ–≤
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞
- –û–±—Ä–∞–±–æ—Ç–∫—É edge cases (–ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ï—Å–ª–∏ —Ñ–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É —Å –ª–∏–º–∏—Ç–æ–º
- –ï—Å–ª–∏ —Ñ–∞–π–ª –ø—É—Å—Ç–æ–π ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
- –ï—Å–ª–∏ –º–∞–ø–ø–∏–Ω–≥ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π ‚Üí –æ–±—ä—è—Å–Ω–∏—Ç—å —á—Ç–æ –Ω–µ —Ç–∞–∫
- –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (>1000 —Å—Ç—Ä–æ–∫) –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ session_state
- –ù–µ –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞—Ç—å —Ñ–∞–π–ª –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –∏ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python logging

---

## üöÄ –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ú–æ–¥–µ–ª–∏** (core/models.py)
   - –î–æ–±–∞–≤–∏—Ç—å ColumnMapping
   - –î–æ–±–∞–≤–∏—Ç—å FileMetadata

2. **–ú–∞–ø–ø–µ—Ä** (core/mapper.py)
   - –°–æ–∑–¥–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –º–∞–ø–ø–∏–Ω–≥–∞
   - –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏

3. **Loader** (core/loader.py)
   - –î–æ–±–∞–≤–∏—Ç—å load_from_uploaded_file
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏

4. **AI Tools** (ai/tools.py)
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ tools
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∏–∑–æ–ª—è—Ü–∏–∏

5. **AI Agent** (ai/variance_agent.py)
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å tools

6. **UI** (app_streamlit.py)
   - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞ –≤ sidebar
   - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±—ã
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∞–± "–î–∞–Ω–Ω—ã–µ"
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –∞–≥–µ–Ω—Ç–æ–º

7. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–æ–∑–¥–∞—Ç—å fixtures
   - –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

8. **–ü–æ–ª–∏—Ä–æ–≤–∫–∞**
   - –£–ª—É—á—à–∏—Ç—å –¥–∏–∑–∞–π–Ω
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏/tooltips
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Streamlit file uploader
```python
uploaded_file = st.file_uploader("Choose a file", type=["csv", "xlsx"])
if uploaded_file:
    # uploaded_file.name - –∏–º—è —Ñ–∞–π–ª–∞
    # uploaded_file.size - —Ä–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö
    # uploaded_file.type - MIME type
    # uploaded_file.getvalue() - bytes —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
```

### –†–∞–±–æ—Ç–∞ —Å session_state
```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
if "key" not in st.session_state:
    st.session_state.key = default_value

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ
st.session_state.key = new_value

# –ß—Ç–µ–Ω–∏–µ
value = st.session_state.key
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–æ–≤
```python
tab1, tab2, tab3 = st.tabs(["üìà Chart", "üóÉ Data", "‚öôÔ∏è Settings"])

with tab1:
    st.write("content for tab 1")

with tab2:
    st.write("content for tab 2")
```

### –ê–Ω–∞–ª–∏–∑ DataFrame
```python
# –¢–∏–ø—ã —Å—Ç–æ–ª–±—Ü–æ–≤
df.dtypes

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
df.describe()

# –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
df['column'].nunique()

# –ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
df.isnull().sum()
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç—å:
- README.md - –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –ø—Ä–æ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤
- SETUP.md - –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ä–º–∞—Ç—É —Ñ–∞–π–ª–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!** 

Claude Code –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å—ë —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—ã—à–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ, –≤–∫–ª—é—á–∞—è backend-–ª–æ–≥–∏–∫—É, AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é, frontend –∏ —Ç–µ—Å—Ç—ã.